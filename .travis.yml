language: python
cache: pip
matrix:
  include:
  - env: TOXENV=lint
    python: 3.6
  - env: TOXENV=py27-dj111
    python: 2.7
  - env: TOXENV=py36-dj111
    python: 3.6
  - env: TOXENV=py36-dj20
    python: 3.6
  - env: TOXENV=py36-dj21
    python: 3.6
  - env: TOXENV=docs
    python: 3.6
install: pip install tox coveralls
script: tox
after_success: coveralls
deploy:
  matrix:
  - provider: pypi
    skip-cleanup: true
    distributions: sdist bdist_wheel --universal
    user: cfpb
    password:
      secure: "T7ugyA/oHZIfttTQ9YQSbU56AN7an8BOVsr+ZTYQsgmTTAw+vWYwjau+/fpv0JON5BooNgQg7/4+vOBb2wSyRoRi9lOpdEwGhTGKAZVWz+umGfkTUIbyImSRNNCuDes9CAFm+oaRGuVEVsniLOjHDyCfNES/3ZPhFQNTO8bdyR4lRSSNRGwCebbHUf2q4hiIbskEM8IegoyiEY/XHdZltLYADRntaC6/SbyN9nDU67b7wdmZIqjhDxyJ8DOhreWWwaePnwPy0X3xHhkQSnn9EUtBPP3xk5V0s1RRYQK62BtNdvHOBttML5XU6o16yLGBGjPkMqNSoGDeGL/cT5z5x+u9T7W8vkSj2p2gTzxS5rKVFIDvFG3DAwi88PHfKbzs7lic6KKN51+D8iyqJIp6zE3i+auFBO4+aTeoPsbqX3kkpD2Z2v6tYwfrzjh0KhVhpDskj/9sLkGZyZZrt3XmHwXL8u23U7zLt+76xcVIOV0anehR22WT6oKsmrG1L94K9I4Y4w5qeyKHQHi5HJ5S4lxFscFRbIYPoai9BnuMaH737wkW9lX8FdIcjhQRMl2nPpB0Fe87RK1Av3/B4RSylktgQlvZlkF6R6erS9CNeT5HNLfqIXAD5qNaxp6cXsV7y5cxqnR7h7R6LwyCQhu0np4Tmf427PPcEWXsGi84h7Y="
    on:
      tags: true
      condition: $TOXENV = "py36-dj111"
  - provider: pages
    local_dir: site
    skip-cleanup: true
    keep-history: true
    github_token: "$GITHUB_TOKEN"
    on:
      tags: true
      condition: $TOXENV = "docs"
